## Aspen Discovery Updates

// mark
### Administration Updates
- Reorganize Grouped Work Display Options to list options alphabetically and collapse sections by default for easier navigation. (DIS-1251)

### Grouped Work Display Updates
- Add a new option to control the Format Display Style for Grouped Works. (DIS-1251)
  - When the new option is enabled, the display of formats for a Grouped Work will change to a horizontal swiper rather than a vertical list. 
  - 

<div markdown="1" class="settings">

#### New Settings
- Catalog / Grouped Works > Grouped Work Display > Format and Edition Display > Format Display Style

</div>

### Performance Updates
- Do not check URL aliases for URLs that have known modules and actions. (DIS-1224) (*MDN*)
- Optimize determining whether website search should be active as a search source by checking web builder prior to checking website indexing settings and when checking website indexing settings stop after one valid setting is found. (DIS-1224) (*MDN*) 
- When loading modules, only return name from SQL since remaining information is unused. (DIS-1224) (*MDN*)
- When determining library and location optimize to test unique subdomains and minimize the number of queries that are performed. (DIS-1224) (*MDN*)
- When loading session information for debugging in the footer do not reload data from the database. (DIS-1224) (*MDN*)
- Do not attempt to load location information based on IP Address if no location is set within IP Address settings. (DIS-1224) (*MDN*)
- Optimize loading related lists for each record within search results. (DIS-1224) (*MDN*)
- Do not load parent theme at startup. Delay until loading a specific theme where it is needed. (DIS-1224) (*MDN*)
- Make loading default theme static to avoid repeated lookups. (DIS-1224) (*MDN*)
- Do not set themeName for library and location theme links until needed. (DIS-1224) (*MDN*)
- Optimize loading System messages by pre-filtering based on the active library or location. (DIS-1224) (*MDN*)
- Optimize loading placards by pre-filtering based on the active library or location, language, and dates active. Also check trigger exact word condition using SQL rather than filtering in PHP. (DIS-1224) (*MDN*)
- Optimize loading related files, holds, and volumes for Grouped Works by fetching all data for the grouped work at once rather than loading per record. (DIS-1224) (*MDN*)
- Ensure year in review information only loads once for a patron. (DIS-1224) (*MDN*)
- Optimize loading JavaScript snippets to batch load them for a library or location all at once rather than one at a time. (DIS-1224) (*MDN*)
- Avoid loading location information (ID 0) for local admin users. (DIS-1224) (*MDN*)
- Optimize getting locations for a library in various locations to avoid repeated lookups. (DIS-1224) (*MDN*)
- Optimize loading series members for a grouped work. (DIS-1224) (*MDN*)
- Optimize loading home libraries for list users. (DIS-1224) (*MDN*)
- Add additional timings when logging queries. (DIS-1224) (*MDN*)
- Add indexes to some tables to improve query performance. (DIS-1224) (*MDN*)
- Cache object structure when on edit screens for improved performance. (DIS-1235) (*MDN*)
- Optimize loading OverDrive records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading Axis360 records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading Hoopla records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading ILS records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading information about checkouts and holds for patrons to show appropriate buttons for if a title is checked out or on hold to a patron. (DIS-1251) (*MDN*)
- Optimize loading libraries from the database by ID. (DIS-1251) (*MDN*)
- Optimize loading MARC Records for ILS Records as well as determining if a MARC record exists for a record and getting the last modification time for a MARC record. (DIS-1251) (*MDN*)

### Record Display Updates
- Show ISBN Qualifier (subfield q) in addition to ISBN within full record view. (DIS-1246) (*MDN*)

### Other Updates
- Correct error after submitting a custom form when logged in as a user with permission to edit forms. (DIS-1208) (*MDN*)
- Remove unused Quick Search tables. (DIS-1238) (*MDN*)
- Change name of Manual Grouping Authorities Tool to Manual Grouping Title/Author Variants. (DIS-135) (*MDN*)
- Remove unused RBdigital functionality. (DIS-1248) (*MDN*)
- Remove unused Redwood functionality. (DIS-1249) (*MDN*)
- Define return types for data object methods. (DIS-1235) (*MDN*)
- Clean up syntax errors and spelling errors within various object code. (DIS-1235) (*MDN*)
- Remove unused code. (DIS-1235) (*MDN*)
- When querying the database using a WHERE IN clause, automatically return no results when using find, fetchAll, and count if there are no values in the clause. (DIS-1251) (*MDN*)

// katherine
### Facet Updates
- Make sure that library system locations always show first for Available Now and Location facets, but only if they actually have results.  (DIS-750) (*KP*)

### Holds Updates
- If Sierra loan rules for a particular record limit hold pickups to specific locations, only show those locations as options in Aspen. (DIS-790) (*KP*)

// myranda
### Hoopla Updates
- Update Hoopla Setting tooltips for API Username and API Password fields to clarify these values are typically provided by an Aspen support vendor (DIS-295) (*MAF*)

// kirstien

// kodi

// imani
# Koha updates
- Update Koha driver to expect overdue as a renewal error message and give a helpful message instead of unknown error (*IT*) (DIS-17)

### Other Updates
- updating CurlWrapper to allow prepending onto user agent (*IT*) (DIS-1168)
- updating AspenSite to prepend Greenhouse onto user agent for requests (*IT*) (DIS-1168)
- Added result-audience and result-<format> classes to audience sections of templates that showed audience information for records or grouped works. (*IT*) (DIS-1197)

// leo
### API Updates
- Added the boolean `optOutOfSoftDeletion` parameter to the `ListAPI::deleteList` endpoint. (DIS-1214) (*LS*)

### Administration Updates
- Hide Library Systems settings for Boundless, Community Engagement, EBSCOhost, EBSCO EDS, Palace Project, and Series modules when they are disabled. (DIS-1201) (*LS*)
- When adding new rows to tables within an object, the page now automatically scrolls to show the new row, and empty unsaved rows can be deleted directly without needing to save first. (DIS-1228) (*LS*)
- The deletion of saved table rows now displays a modal to ask for confirmation of the deletion. (DIS-1228) (*LS*)

### Evergreen Updates
- Fixed an issue where the initial reading history import could stall if a bad response code or response message was received from Evergreen. (DIS-1222) (*LS*)

### Performance Updates
- Optimized `getHistoryPropertyName` method to reduce memory consumption and decrease save times. (DIS-1225) (*LS*)

### Searching Updates
- Fixed "facet does not exist" error for Web Resource facet popups. (DIS-1193) (*LS*)

### Server Setup Updates
- Fixed subdomain detection to properly handle multi-level subdomains by extracting all possible subdomain combinations for more flexible library/location matching. (DIS-1217) (*LS, MDN*)

### Side Loads Updates
- Added the ability for uploaded .zip files of MARC files to be unzipped. (DIS-1179) (*LS*)
- After successful uploads: (DIS-1179) (*LS*)
  - Users are redirected to the `viewMarcFiles` page with a displayed success message.
  - A full update is automatically run to index the newly uploaded MARC files' data.
- Modified the button styling to match other admin pages, including a "View Marc Files" button on the upload page to direct users to the `viewMarcFiles` page. (DIS-1179) (*LS*)

### Wikipedia Integration Updates
- Allow parenthetical content to be used for author disambiguation in the Author Enrichment settings. (DIS-1210) (*LS*)
- Added a debug message to display when Wikipedia provides disambiguation content to help administrators understand what search term was used. (DIS-1210) (*LS*)

### Other Updates
- Resolved errors caused by locations referencing deleted parent libraries by filtering out orphaned locations when viewing SelectInterface page. (DIS-1221) (*LS*)
- Fixed undefined array key warnings in Community Engagement campaigns when sorting milestone progress data by checkout date. (DIS-1233) (*LS*)
- Added missing 'time' property type handler for OneToMany relationships in DataObjectUtil that prevented manual changes to Library Hours from saving. (DIS-1260) (*LS*)

// yanjun

// james

// alexander
### Community Engagement
- Ensure progress for extra credit activities is cleared when a user unenrolls from a campaign (DIS-1239) (*AB*)
- Apply placeholder image logic to extra credit activities (DIS-1240) (*AB*)
- Ensure image size is consistent across all campaign rewards (DIS-1241) (*AB*)
- Add a section for Extra Credit activites to the Advertisement section. (DIS-1243) (*AB*)
- Add a section to the 'Admin View' section when filtering by user so that staff can see and add to progress to Extra Credit Activites (DIS-1243) (*AB*)
- Add title information for records for milestones based on reviews and ratings in the 'Your Campaigns' section. (DIS-1256) (*AB*)
### other Updates
- Increase the max length of the display name column in Locations. (DIS-1186) (*AB*)

// chloe

// pedro

// will


## This release includes code contributions from
### ByWater Solutions
- Leo Stoyanov (LS)
- Yanjun Li (YL)
- Imani Thomas (IT)
- Ian Walls (IW)
- Laura Escamilla (LE)
- Nick Clemens (NC)

### Cleveland Public Library
- Will Skora (WS)

### Equinox Open Library Initiative
- Jason Boyer (JB)

### Grove For Libraries
- Mark Noble (MDN)
- Kirstien Kroeger (KK)
- Katherine Perdue (KP)
- Kodi Lein (KL)
- Myranda Fuentes (MAF)

### LibraryThing
- Chris Catalfo (CC)
- Lauren Przywara (LP)

### Nashville Public Library
- James Staub (JStaub)

### Open Fifth
- Alexander Blanchard (AB)
- Chloe Zermatten (CZ)
- Jacob O'Mara (JOM)
- Pedro Amorim (PA)

### Theke Solutions
- Lucas Montoya (LM)

## Special Testing thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)
- Mark Noble (Grove)
- Kirstien Kroeger (KK)

## Special Documentation thanks to
- Myranda Fuentes (Grove)
- Tricia Andrews (Metropolitan Library System)
- Will Skora (Cleveland Public Library)
- Jeff Godin (Traverse Area District Library)

## This release includes sponsored developments from
- 