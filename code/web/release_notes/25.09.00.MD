## Aspen Discovery Updates

// mark
### Administration Updates
- Reorganize Grouped Work Display Options to list options alphabetically and collapse sections by default for easier navigation. (DIS-1251) (*MDN*)

### API Updates
- Return completion message at the end of successful Scan and Go operations. (DIS-1275) (*MDN*) 

### Grouped Work Updates
- Add a new option to control the Format Display Style for Grouped Works. (DIS-1251) (*MDN*)
  - When the new option is enabled, the display of formats for a Grouped Work will change to a horizontal swiper rather than a vertical list.
- When setting display info, do not prompt for series information if the series module is enabled. (DIS-1116) (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Catalog / Grouped Works > Grouped Work Display > Format and Edition Display > Format Display Style

</div>

### Indexing Updates
- Add diagnostics information for Set Display Info while indexing. (DIS-1116) (*MDN*)
- When the series module is active, do not apply Display Info for series name and series display order. (DIS-1116) (*MDN*)

### Performance Updates
- Do not check URL aliases for URLs that have known modules and actions. (DIS-1224) (*MDN*)
- Optimize determining whether website search should be active as a search source by checking web builder prior to checking website indexing settings and when checking website indexing settings stop after one valid setting is found. (DIS-1224) (*MDN*) 
- When loading modules, only return name from SQL since remaining information is unused. (DIS-1224) (*MDN*)
- When determining library and location optimize to test unique subdomains and minimize the number of queries that are performed. (DIS-1224) (*MDN*)
- When loading session information for debugging in the footer do not reload data from the database. (DIS-1224) (*MDN*)
- Do not attempt to load location information based on IP Address if no location is set within IP Address settings. (DIS-1224) (*MDN*)
- Optimize loading related lists for each record within search results. (DIS-1224) (*MDN*)
- Do not load parent theme at startup. Delay until loading a specific theme where it is needed. (DIS-1224) (*MDN*)
- Make loading default theme static to avoid repeated lookups. (DIS-1224) (*MDN*)
- Do not set themeName for library and location theme links until needed. (DIS-1224) (*MDN*)
- Optimize loading System messages by pre-filtering based on the active library or location. (DIS-1224) (*MDN*)
- Optimize loading placards by pre-filtering based on the active library or location, language, and dates active. Also check trigger exact word condition using SQL rather than filtering in PHP. (DIS-1224) (*MDN*)
- Optimize loading related files, holds, and volumes for Grouped Works by fetching all data for the grouped work at once rather than loading per record. (DIS-1224) (*MDN*)
- Ensure year in review information only loads once for a patron. (DIS-1224) (*MDN*)
- Optimize loading JavaScript snippets to batch load them for a library or location all at once rather than one at a time. (DIS-1224) (*MDN*)
- Avoid loading location information (ID 0) for local admin users. (DIS-1224) (*MDN*)
- Optimize getting locations for a library in various locations to avoid repeated lookups. (DIS-1224) (*MDN*)
- Optimize loading series members for a grouped work. (DIS-1224) (*MDN*)
- Optimize loading home libraries for list users. (DIS-1224) (*MDN*)
- Add additional timings when logging queries. (DIS-1224) (*MDN*)
- Add indexes to some tables to improve query performance. (DIS-1224) (*MDN*)
- Cache object structure when on edit screens for improved performance. (DIS-1235) (*MDN*)
- Optimize loading OverDrive records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading Axis360 records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading Hoopla records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading ILS records for use in search results and full record view to improve performance. (DIS-1251) (*MDN*)
- Optimize loading information about checkouts and holds for patrons to show appropriate buttons for if a title is checked out or on hold to a patron. (DIS-1251) (*MDN*)
- Optimize loading libraries from the database by ID. (DIS-1251) (*MDN*)
- Optimize loading MARC Records for ILS Records as well as determining if a MARC record exists for a record and getting the last modification time for a MARC record. (DIS-1251) (*MDN*)

### Record Display Updates
- Show ISBN Qualifier (subfield q) in addition to ISBN within full record view. (DIS-1246) (*MDN*)

### Scan and Go Updates
- Allow Self Check Messages to be configured for display after titles have been checked out from LiDA. Anyone with permission to administer Self Check Settings can update these. (DIS-1275) (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Aspen LiDA > Self Check Completion Messages

</div>

### Symphony Updates
- Properly load fines during the scan and go process to ensure checks for maximum fine thresholds work. (DIS-1117) (*MDN*)
- If a patron has overdue titles, check the overdue threshold and apply an override if the threshold has not been reached. (DIS-1273) (*MDN*)

### Other Updates
- Correct error after submitting a custom form when logged in as a user with permission to edit forms. (DIS-1208) (*MDN*)
- Remove unused Quick Search tables. (DIS-1238) (*MDN*)
- Change name of Manual Grouping Authorities Tool to Manual Grouping Title/Author Variants. (DIS-135) (*MDN*)
- Remove unused RBdigital functionality. (DIS-1248) (*MDN*)
- Remove unused Redwood functionality. (DIS-1249) (*MDN*)
- Define return types for data object methods. (DIS-1235) (*MDN*)
- Clean up syntax errors and spelling errors within various object code. (DIS-1235) (*MDN*)
- Remove unused code. (DIS-1235) (*MDN*)
- When querying the database using a WHERE IN clause, automatically return no results when using find, fetchAll, and count if there are no values in the clause. (DIS-1251) (*MDN*)

// katherine
### API Updates
- Update the User API so that including a grouped work ID or record ID in a request for pickup locations will return locations valid for that record (if supported by the ILS). (DIS-790) (*KP*)

### Facet Updates
- Make sure that library system locations always show first for Available Now and Location facets, but only if they actually have results.  (DIS-750) (*KP*)

### Fines Updates
- For Sierra only, check if a patron's account is locked (by making a partial payment of $0) before beginning fine payment. (DIS-683) (*KP*)

### Holds Updates
- If Sierra loan rules for a particular record limit hold pickups to specific locations, only show those locations as options in Aspen. (DIS-790) (*KP*)

### Series Updates
- Unchecking 'Include in Search' in Administer Series will also prevent the series from appearing in the list of series for a record group. (DIS-1280) (*KP*)
- Fix Administer Series bug where volume number could not be changed if it started with a zero. (DIS-1279) (*KP*) 
- When the same title appears multiple times in a series, show the correct volume number on the series page. (DIS-1281) (*KP*)

// myranda
### Hoopla Updates
- Update Hoopla Setting tooltips for API Username and API Password fields to clarify these values are typically provided by an Aspen support vendor (DIS-295) (*MAF*)

### Support Updates
- Integrated existing API documentation into the Aspen Discovery Support section of the Aspen Administration interface (DIS-1229) (*MAF*)

// kirstien
### API Updates
- Added support for Aspen Events as a valid source when calling searchLite in Search API. (DIS-1262) (*KK*)
- Added support for Aspen Events to be a valid source when calling getAppBrowseCategoryResults in Search API. (DIS-1262) (*KK*)
- Added support for Aspen Events to be a valid source when calling getEventDetails in Event API. (DIS-1262) (*KK*)

### List Updates
- Added updated Print List to prompt the user to select which elements they want to include in the printout. (DIS-1282) (*KK*)

// kodi

// imani
# Solr Updates
- Update Solr Indexer to give on order items date added values based on date while preserving the behavior of being before other things
# Koha updates
- Update Koha driver to expect overdue as a renewal error message and give a helpful message instead of unknown error (*IT*) (DIS-17)

### Other Updates
- updating CurlWrapper to allow prepending onto user agent (*IT*) (DIS-1168)
- updating AspenSite to prepend Greenhouse onto user agent for requests (*IT*) (DIS-1168)
- Added result-audience and result-<format> classes to audience sections of templates that showed audience information for records or grouped works. (*IT*) (DIS-1197)

// leo
### API Updates
- Added the boolean `optOutOfSoftDeletion` parameter to the `ListAPI::deleteList` endpoint. (DIS-1214) (*LS*)

### Account Updates
- When submitting the registration form in Aspen, the "Register" button will be disabled to prevent multiple patron accounts from being created. (DIS-1264) (*LS*)

### Administration Updates
- Hide Library Systems settings for Boundless, Community Engagement, EBSCOhost, EBSCO EDS, Palace Project, and Series modules when they are disabled. (DIS-1201) (*LS*)
- When adding new rows to tables within an object, the page now automatically scrolls to show the new row, and empty unsaved rows can be deleted directly without needing to save first. (DIS-1228) (*LS*)
- The deletion of saved table rows now displays a modal to ask for confirmation of the deletion. (DIS-1228) (*LS*)

### Advanced Search Updates
- Fixed an issue where the display of results in browse categories and collection spotlights made from an advanced search did not match the results in the advanced search. (DIS-1242) (*LS*)
- Removed the multi-group restriction that caused the "too complex" error when creating a browse category. (DIS-1242) (*LS*)
- Enhanced the regex parsing to properly handle parentheses and preserve individual AND/OR operators between each group rather than forcing them all to match. (DIS-1242) (*LS*)

### Browse Categories Updates
- Increased the maximum length of the Browse Category Label from 50 to 100. (DIS-1277) (*LS*)
  - Added `maxLength` attribute to the fields to prevent users from entering greater than 100 characters.
  
### Code Maintenance Updates
- Upgraded from jQuery 1.11.0 to 3.7.1, jQuery UI to 1.14.1, and jQuery TableSorter to 2.32.0 to leverage latest security patches and performance improvements. (DIS-1234) (*LS*)
  - Updated all `.touchwipe()` calls to `.swipe()` in the template files.
  - Fixed `jQuery.fn.removeAttr()` boolean properties deprecation by using `.prop()` instead.
  - Updated TableSorter JS files to no longer use deprecated `$.isFunction()`, `.bind`, `.unbind`, `$.trim`, and `jQuery.isArray`; replaced with `typeof` check, `.on()`/`.off()`, `String.prototype.trim`, and `Array.isArray`.
- Fixed deprecated jQuery event shorthand methods, specifically replacing deprecated event handlers with `.on()` equivalents across all JavaScript files and templates. (DIS-1234) (*LS*)
  - Manually updated `bootstrap.js` and `bootstrap.min.js` to replace deprecated `.focus()` calls with `.trigger("focus")` equivalents. 
  - Replaced `$.isFunction()` with native `typeof === 'function'` checks in jCarousel and jCarousel-Swipe plugins. 
  - Deleted unused rwdImageMaps JS files from the codebase. 
- Improved admin object editor forms to prevent false positive unsaved changes warnings. (DIS-1234) (*LS*)
- Removed redundant code in `Admin/collectionSpotlight.tpl` and updated its jQuery code. (DIS-1234) (*LS*)
- Removed unused Adapters, Canvas Tools, Data, Exporting, Highcharts, jPlayer, jQuery Mousewheel, and OpenSeadragon plugins. (DIS-1234) (*LS*)
  - Removed miscellaneous jQuery Tooltip plugins and jQuery UI custom images.

### Cover Images Updates
- Added Ethiopic script support for the generation of default covers. (DIS-1284) (*LS*)

### Events Updates
- Fixed issue where changes to some fields were not being saved to the database. (DIS-1220) (*LS*)
- Improved Date Preview formatting by removing trailing semicolon from the end of the date list. (DIS-1220) (*LS*)

### Evergreen Updates
- Fixed an issue where the initial reading history import could stall if a bad response code or response message was received from Evergreen. (DIS-1222) (*LS*)
- Under Library System settings, the "Opting In to Reading History Updates ILS Settings" and "Opting Out of Reading History Updates ILS Settings" now sync with the Evergreen to update patrons' reading history preferences. (DIS-669)
  - If both settings are enabled for the patron's home library, the patron is automatically opted in/out to Reading History in Aspen depending on the patron's Reading History preferences in Evergreen.

### Reading History Updates
- Added success message to display when patrons stop and start recording their reading history. (DIS-669) (*LS*)

### Holds Updates
- Add the option to sort pending, frozen holds by "Reactivation Date". (DIS-1225) (*LS*)

### Indexing Updates
- Added sortMissingLast attribute to local availability fields to prevent unscoped items from appearing at top of date-sorted results. (DIS-1259)

### Materials Request Updates
- Fixed Materials Request date filters reverting after navigation because their values did not persist like other filters. (DIS-1247) (*LS*)
- The New Request Summary field is no longer hidden in Library Systems settings when the "ILS Request System" is enabled. (DIS-1276) (*LS*)

### Performance Updates
- Optimized `getHistoryPropertyName` method to reduce memory consumption and decrease save times. (DIS-1225) (*LS*)

### Materials Requests Updates
- Modified the Format, Format Label, and Author Label fields to be required under the Formats of Materials that can be Requested table, as they are necessary functionality. (DIS-1244) (*LS*)

### Searching Updates
- Fixed "facet does not exist" error for Web Resource facet popups. (DIS-1193) (*LS*)
- Fixed an issue where navigation links "Previous" and "Next" would not display on grouped works beyond the first page of search results. (DIS-1268) (*LS*)
- Corrected search history timestamps to display the current date instead of future dates. (DIS-1287) (*LS*)

### Server Setup Updates
- Fixed subdomain detection to properly handle multi-level subdomains by extracting all possible subdomain combinations for more flexible library/location matching. (DIS-1217) (*LS, MDN*)

### Side Loads Updates
- Added the ability for uploaded .zip files of MARC files to be unzipped. (DIS-1179) (*LS*)
- After successful uploads: (DIS-1179) (*LS*)
  - Users are redirected to the `viewMarcFiles` page with a displayed success message.
  - A full update is automatically run to index the newly uploaded MARC files' data.
- Modified the button styling to match other admin pages, including a "View Marc Files" button on the upload page to direct users to the `viewMarcFiles` page. (DIS-1179) (*LS*)

### Sierra Updates
- Added "Add Self-Registration Note" option to Self Registration Forms settings to make the setting of Circ Note in patron records optional in Sierra. (DIS-1267) (*LS*)

### User List Updates
- Text in the "Delete Entire List" modal can now be translated. (DIS-1265) (*LS*)
- The "Delete Selected Lists" now uses Aspen's standard modal layout, matching the "Delete Entire List" flow with allowing to opt out of soft deletion. (DIS-1265) (*LS*)
- The "Delete Selected Lists" button is disabled when no lists are selected, with a warning modal shown if somehow clicked. (DIS-1265) (*LS*)

### Web Builder Updates
- Fixed form resubmission issue where refreshing the results page would create duplicate submissions. (DIS-1278) (*LS*)

### Wikipedia Integration Updates
- Allow parenthetical content to be used for author disambiguation in the Author Enrichment settings. (DIS-1210) (*LS*)
- Added a debug message to display when Wikipedia provides disambiguation content to help administrators understand what search term was used. (DIS-1210) (*LS*)

### Other Updates
- Resolved errors caused by locations referencing deleted parent libraries by filtering out orphaned locations when viewing SelectInterface page. (DIS-1221) (*LS*)
- Fixed undefined array key warnings in Community Engagement campaigns when sorting milestone progress data by checkout date. (DIS-1233) (*LS*)
- Fixed PHP warning about undefined array key for "lookfor" for ILL integrations. (DIS-1242) (*LS*)
- Fixed PHP installation script to handle non-interactive environments by adding --yes flag to GPG key import. (DIS-1258) (*LS*)
- Updated GD RAQM rebuild script to prevent hanging on apt-get update prompts in automated deployments. (DIS-1258) (*LS*)
- Added missing 'time' property type handler for OneToMany relationships in DataObjectUtil that prevented manual changes to Library Hours from saving. (DIS-1260) (*LS*)
- Fixed an issue where the Masquerade As modal did not focus on the first field when opened. (DIS-1234) (*LS*)
- Fixed undefined array key "subSection" on some Usage Graphs pages. (DIS-1234) (*LS*)

// yanjun
### Hoopla Updates
- Fixed an issue where Flex titles that were extracted from the Instant extraction endpoint would be deleted and fail to be reinserted. (DIS-1252) (*YL*)

### Polaris Updates
- Remove endpoint /synch/bibs/MARCXML for Incremental Indexing, add endpoint /synch/bibs/updated for fetching the list of bib IDs updated within the given timeframe. (DIS-1274) (*YL*)
- Refactor the Incremental and Full Indexing for different endpoints and workflows. (DIS-1274) (*YL*)

// james

// alexander
### Community Engagement
- Add API end points to allow community engagement information to be accessed in LiDA. (DIS-646)(*AB*)
- Ensure progress for extra credit activities is cleared when a user unenrolls from a campaign (DIS-1239) (*AB*)
- Apply placeholder image logic to extra credit activities (DIS-1240) (*AB*)
- Ensure image size is consistent across all campaign rewards (DIS-1241) (*AB*)
- Add a section for Extra Credit activites to the Advertisement section. (DIS-1243) (*AB*)
- Add a section to the 'Admin View' section when filtering by user so that staff can see and add to progress to Extra Credit Activites (DIS-1243) (*AB*)
- Add title information for records for milestones based on reviews and ratings in the 'Your Campaigns' section. (DIS-1256) (*AB*)

### Other Updates
- Increase the max length of the display name column in Locations. (DIS-1186) (*AB*)

// chloe

// pedro

// will

// Brendan
### Web Builder Updates
- Add per library emailResultsTo to Custom Forms. (DIS 1196) (*BL*)

// Lucas
### Koha Updates
- Add a new maximum age check for self-registration based on Koha system preference 'PatronSelfRegistrationAgeRestriction'. (DIS-1227) (*LM*)


## This release includes code contributions from
### ByWater Solutions
- Leo Stoyanov (LS)
- Yanjun Li (YL)
- Imani Thomas (IT)
- Ian Walls (IW)
- Laura Escamilla (LE)
- Nick Clemens (NC)

### Cape Libraries Automated Materials Sharing (CLAMS)
- Brendan Lawlor (BL)

### Cleveland Public Library
- Will Skora (WS)

### Equinox Open Library Initiative
- Jason Boyer (JB)

### Grove For Libraries
- Mark Noble (MDN)
- Kirstien Kroeger (KK)
- Katherine Perdue (KP)
- Kodi Lein (KL)
- Myranda Fuentes (MAF)

### LibraryThing
- Chris Catalfo (CC)
- Lauren Przywara (LP)

### Nashville Public Library
- James Staub (JStaub)

### Open Fifth
- Alexander Blanchard (AB)
- Chloe Zermatten (CZ)
- Jacob O'Mara (JOM)
- Pedro Amorim (PA)

### Theke Solutions
- Lucas Montoya (LM)

## Special Testing thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)
- Mark Noble (Grove)
- Kirstien Kroeger (KK)

## Special Documentation thanks to
- Myranda Fuentes (Grove)
- Tricia Andrews (Metropolitan Library System)
- Kris Becker (Jackson County Library System)

## This release includes sponsored developments from
- 