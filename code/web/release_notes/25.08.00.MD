## Aspen Discovery Updates

// mark
### API Updates
- Provide additional information to LiDA to properly handle Local ILL request actions for volumes. (DIS-1115) (*MDN*)
- Allow Local ILL request emails to be submitted. (DIS-1115) (*MDN*)

### Deep Linking Updates
- Allow linking to the Aspen Materials Request forms from LiDA. (DIS-1115) (*MDN*)

### Indexing Updates
- Add Video Enabled Book Format based on 300a containing "video-enabled book". (DIS-1183) (*MDN*)
- Add handling of 810, 811, 896, 897, 898, and 899 fields for series data. (DIS-1184) (*MDN*)

### Local ILL Updates
- When placing holds on titles that require a local ILL request for a volume which cannot be filled by the underlying ILS, perform one of the following actions depending on library configuration. (DIS-1115) (*MDN*)
  - Direct the user to the Aspen materials request system. 
  - Direct the user to the external request URL
  - Prompt the user for information about their request and email the library. 
  - Show a message to contact the library to place the request (previous behavior).

### Materials Request Updates
- Optionally, send staff an email after a new Materials Request is created. (DIS-1113) (*MDN*)
- Add a request source to differentiate between requests placed via Aspen Materials Request and those placed via Local ILL. (DIS-1115) (*MDN*)

### Performance Updates
- Optimize Loading Lists of libraries and Indexing Profiles. (DIS-1182) (*MDN*)

### Series Updates
- Properly index series with no audiences applied. (DIS-1185) (*MDN*)

### Symphony Updates
- Allow checking out titles using Scan and Go to patrons that have fines or fees, but the total fines have not reached the bill threshold for their patron type. (DIS-1117)

### User List Updates
- Correctly set the list entry title when adding Aspen Native Events to a list. (DIS-1150) (*MDN*)

### Other Updates
- Allow manually grouping records from the Author page. (DIS-1134) (*MDN*)

// katherine
### Self Registration Updates
- Validate formats for email addresses and ten digit phone numbers during self registration. (DIS-884) (*KP*)
- For Sierra only, allow specific PType, PCodes, and account expiration to be automatically set based on patron city, county, or state. (DIS-884) (*KP*)
- For Sierra only, allow the user to choose a notice preference during self registration. (DIS-884) (*KP*)
- For Sierra only, add an option to use the Sierra patron record ID as a barcode instead of assigning one during self registration. (DIS-884) (*KP*)
- For Sierra only, add an option to check for duplicate patrons during registration and disallow if a patron already exists with the same name and birthdate.  (DIS-884) (*KP*)
- For Sierra only, log self registrations and display them in Review Library Registrations so that they can be edited, approved, or deleted. (DIS-884) (*KP*)
- Add an option to Sierra Self Reg form to not set the Agency field because using it when not enabled in Sierra was causing self registration to fail. (DIS-884) (*KP*)
- Add option to have the user agree to the Terms of Service before showing the Self Registration form. (DIS-884) (*KP*)
<div markdown="1" class="settings">

#### New Permissions
- Manage Self Registration Municipalities - Allows the user to view and edit the Municipality Settings on Sierra Self Registration Forms.
- Review Self Registrations for All Libraries - Allows the user to view, edit, approve, and delete self registrations in Review Library Registrations for all libraries.
- Review Self Registrations for Home Library Only - Allows the user to view, edit, approve, and delete self registrations in Review Library Registrations for their home library.

#### New Settings
- ILS Integration > Review Library Registrations
- ILS Integration > Self Registration Forms (Sierra) > Use Patron ID as Barcode
- ILS Integration > Self Registration Forms (Sierra) > Turn Off Duplicate Checking
- ILS Integration > Self Registration Forms (Sierra) > Use Patron Agency
- ILS Integration > Self Registration Forms (Sierra) > Municipality Settings
- ILS Integration > Self Registration TOS > Show TOS First
- Library Systems > ILS/Account Integration > Self Registration > Log Self Registrations

</div>

### My Account Updates
- Enable Messaging Settings for Sierra and allow patrons to set their own notice preference. (DIS-884) (*KP*)

### Email Updates
- Add token in email templates to include the URL for messaging settings. (DIS-884) (*KP*)

// myranda

// kirstien
### API Updates
- Added filter parameter to getPatronReadingHistory to User API to handle searching reading history in LiDA. (DIS-1118) (*KK*)
### API Documentation
- Added Open API documentation for the User API, Event API, and Work API. (*KK*)
### Aspen LiDA
- Added Notification Testing Tool to send test notifications to a device and view the response from the Expo Notification Service. (*KK*)

// kodi
### User List Updates
- Updated sorting by title and author to use left joins on relevant tables for list entries (DIS-1091) (*K
### While You Wait / You Might Also Like Updates
-  Add scoping options for While You Wait and You Might Also Like to optionally limit results by owning library and format (DIS-995) (*KL*)

<div markdown="1" class="settings">

#### New Settings
- Library Systems > ILS/Account Integration > Show You Might Also Like

</div>

### Other Updates
- Prevent crawlers from indexing Grouped Works with additional parameters (i.e., activeFormat and searchSource) (DIS-995) (*KL*)

// kyle

// ian

// imani
### Aspen Discovery Updates
- MarcRecordDriver doing preliminary check if the record would pull up the invalidRecord.tpl template when trying to display and returns an empty string for its linkUrl if so to avoid pointing Patrons to links they cannot load.

// leo
### Account Updates
- Match the expiration date display format of linked library cards with the primary library card. (DIS-1159) (*LS*)

### Administration Updates
- Removed the 15-minute interval restriction when updating Library Hours under the Locations settings; any time can be chosen. (DIS-1137) (*LS*)
- Documentation links now automatically open in new tabs, allowing administrators to reference help without losing their current configuration work. (DIS-169) (*LS*)

### API Updates
- Fixed error in List API when retrieving user list data for non-LiDA applications. (DIS-1148) (*LS*)
- Improved error handling when updating a Browse Category with the same settings; now shows a clear message explaining the update isn't allowed. (DIS-1095) (*LS*)
- Sort options are now shown or hidden based on source type to prevent selecting unsupported sorting methods. (DIS-1095) (*LS*)

### Browse Category Updates
- Fixed an issue where browse categories created through the admin interface did not save the creator's user ID. (DIS-1135) (*LS*)

### Collection Spotlight Updates
- Refined permission logic to no longer incorrectly check users with "Administer All Collection Spotlights" for a home library when creating a new Collection Spotlight. (DIS-1095) (*LS*)
- Sort options are now shown or hidden based on source type to prevent selecting unsupported sorting methods. (DIS-1095) (*LS*)

### Community Engagement Updates
- Fixed an issue where milestone progress would not update when Polaris holds were made. (DIS-1166) (*LS*)

### Cover Image Updates
- Fixed expired Library Market and Communico events not displaying covers in default list covers. (DIS-1112) (*LS*)

### E-Commerce Updates
- Fixed an issue where NCR payments would be marked as cancelled if the transaction/order ID ended in zero. (DIS-1119) (*LS*)

### Events Updates
- Recurring native events now maintain correct display times across Daylight Saving Time transitions instead of appearing one hour off after DST changes. (DIS-1158) (*LS*)
- Fixed an issue where Browse Categories and Collection Spotlights created from Event searches did not retain the "Event Date" sort and defaulted to "Best Match". (DIS-1095) (*LS*)

### Evergreen Updates
- Expiration date on Library Card page now correctly shows the patron's date when masquerading, not the staff account's. (DIS-1088) (*LS*)

### Holds Updates
- Implemented new "Maximum Hold Cancellation Date" setting under Library System to restrict future hold cancellations. (DIS-1057) (*LS*)
  - Patrons cannot place holds with a cancellation date beyond the configured maximum.
  - If "Show Hold Cancellation Date" is disabled, related settings are hidden to reduce confusion.
  - Updated names and descriptions for all related settings to better reflect their behavior.
- Added the option to sort Pending Holds by "Hold Cancellation Date". (DIS-1057) (*LS*)
- Resolved an issue where multiple volume holds could be placed by repeatedly clicking the button to place holds in the loading modal. (DIS-1121) (*LS*)
- Added spinner icons to place hold buttons across Aspen to indicate modal loading of place-hold forms or hold submission in progress. (DIS-1121) (*LS*)
- The volume holds form now hides suppressed volumes that would previously appear as selectable options but lead to errors when placing a hold. (DIS-1152) (*LS*)
- Validate patron's actual preferred pickup location instead of defaulting to home location when "Remember Pickup Location" preference is enabled. (DIS-1172) (*LS*)
- Added messages on hold prompts to provide context about why manual pickup location selection is needed for some cases. (DIS-1172) (*LS*)

<div markdown="1" class="settings">

#### New Settings
- Library System > ILS/Account Integration > Holds > Maximum Hold Cancellation Date

</div>

### Indexing Updates
- Added debug messages in scope inclusion rules for the Diagnostics modal to now provide explanations when items are excluded from library scopes. (DIS-1089) (*LS*)

### Koha Updates
- Added additional version checks around the Koha preferred name feature to prevent compatibility issues on instances running versions prior to 24.11. (DIS-1149) (*LS*)
- Added consideration of "On Hold Shelf" item status for available records when "Prioritize Available Records for Title Selection" is enabled. (DIS-1132) (*LS*)
- Fixed an issue where the "On Order" record's title would still be chosen for display in the grouped work if it was processed first when "Prioritize Available Records for Title Selection" is enabled. (DIS-1132) (*LS*)
- Added the option to automatically update contact information during indexing. (DIS-1137) (*LS*)
- Renamed the "Automatically Update with Closures from the ILS" to "Automatically Update with Library Hours and Closures from the ILS" to reflect its additional behavior of automatically updating Library Hours during indexing. (DIS-1137) (*LS*)
- Added "Allow Material Requests Branch Choice" setting for the ILS Request System, allowing patrons to select which branch should receive their materials request instead of defaulting to their home branch. (DIS-1153) (*LS*)

<div markdown="1" class="settings">

#### New Settings
- Primary Configuration > Library System > Materials Request > Allow Material Requests Branch Choice
- Primary Configuration > Locations > Automatically Update Contact Information from the ILS

</div>

### Materials Requests Updates
- Improved usage tracking for Materials Requests to include status changes made by staff in all admin interfaces and via the API. (DIS-1083) (*LS*)

### Open Archives Updates
- Fixed an issue where dates shown in Open Archives collections would differ from the dates displayed on external archive websites. (DIS-1063) (*LS*)
- Added detailed progress tracking and log entries for Open Archives indexing. (DIS-1063) (*LS*)

### Searching Updates
- Added top facets to Author search results pages to maintain consistency with regular catalog search results. (DIS-1040) (*LS*)

### Series Updates
- Resolved an issue where Hidden Series with parentheses would not be hidden. (DIS-1139) (*LS*) 
- Fixed Hidden Series functionality to properly filter NoveList series data from grouped work displays. (DIS-1139) (*LS*)

### Side Loads Updates
- Fixed an issue where the "Delete" button in Side Load >>> MARC Files did not work for filenames that include an apostrophe. (DIS-1066) (*LS*)
- As a part of standardization, a confirmation modal will now display when deleting side-loaded MARC files. (DIS-1066) (*LS*)
- Added "Comic" as an option under "Specified Format Category" to allow side loads to group under the category "comic". (DIS-1127) (*LS*)

### User List Updates
- Fixed sorting issues when creating from list searches: "Date Added" and "Date Updated" are now respected. (DIS-1095) (*LS*)
  - Introduced a new source type, "Public List Search," to better support sorting and behavior from public list searches.

### Other Updates
- Added the ungrouped status indicator for the Staff Views of Hoopla, Axis360, Palace Project, and CloudLibrary records. (DIS-1080) (*LS*)
- Added proper auto-close timer cleanup to prevent timer conflicts between sequential modals. (DIS-1090) (*LS*)
- Improved auto-close timer logic for modals to support both boolean (3-second default) and numeric (custom milliseconds) timeout values. (DIS-1090) (*LS*)
- Removed the misleading "Logging you in now. Please wait." alert when a login fails. (DIS-1090) (*LS*)
- Fixed an issue where sorting on the Host Information page did not work. (DIS-1097) (*LS*)
- New rows in admin settings now stay in the correct order on first save when you drag and drop them. (DIS-1111) (*LS*)
- Fixed PHP autoloader failing when cron scripts are run from subdirectories, resolving "Failed opening required" errors, such as when running `loadInitialReadingHistory.php`. (DIS-1156) (*LS*)
- Fixed database column defaults for Library and Location record inclusion settings to match PHP class defaults, ensuring consistent behavior when importing from ILSs: `includeHoldableOnly` defaults to disabled, `includeItemsOnOrder` and `includeEContent` default to enabled. (DIS-1170) (*LS*)
- Fixed an issue where the page would continuously scroll to the top, preventing normal user scrolling. (DIS-1187) (*LS*)
- "Staff View" and "Reviews from GoodReads" accordions now loads properly when set to open automatically in Grouped Work Display settings. (DIS-131) (*LS*)
- Removed unused `Springshare/moredetails-accordion.tpl`. (DIS-131) (*LS*)
- Fixed an issue where new Administrators could not be added for SSO accounts. (DIS-1188) (*LS*)

// yanjun
### Cloud Library Updates
- Add deletion process for expired Cloud Library records during Incremental updates. (DIS-1099) (*YL*)
- Refactor deletion logic for full update and incremental updates. (DIS-1099) (*YL*)

### Hoopla Updates
- Allow Hoopla records to display with 'Access Online' button if in Library Systems, Hoopla Library ID set to 0. (DIS-1178) (*YL*)

### OverDrive Updates
-  Limit OverDrive hold suspension to 365 days max. If no date is selected or if the selected date is more than 365 days in the future, the suspension will automatically default to 365 days.(DIS-1086) (*YL*)

// laura

// james
### Circulation Reports Updates
- Nashville-only: Added a report to display school librarians information (DIS-1171) (*JStaub*)
- Made the text of printable student reports translatable. (DIS-1175) (*JStaub*)

### Other Updates
- Tidy up the default bad bots list. (DIS-1141) (*JStaub*)
- Add and remove bad bots from the default list. (DIS-1142) (*JStaub*)
- Nashville-only: Send staff email when non-resident update fails following out-of-county fee payment. (DIS-1125) (*JStaub*)

// alexander
### Community Engagement Updates
- Prevent an error from being logged when a reward with no image is saved. (DIS-1176) (*AB*)
- Remove unneeded check for display of campaign leaderboard. (DIS-1173) (*AB*)
- Fixed campaigns with no stat or end date displaying for linked users. (DIS-1169) (*AB*)
- Prevented the addition of progress data titles to milestones that are complete and not set to track progress beyond 100%. (DIS-1143) (*AB*)
- Update the modal that displays when enrolling in a campaign to include a link to contact information and to use a .tpl file. (DIS-701) (*AB*)
- Add the ability for admin to enroll users in campaigns. (DIS-470) (*AB*)
- Add the option of using a search bar rather than a dropdown to search users. (DIS-470) (*AB*)
- Fix undefined array key in linked user campaigns table (DIS-1136) (*AB*)
- Add the ability for libraries to choose whether to display digital reward images at all times or to show a placeholder until the reward has been obtained (DIS-1129) (*AB*)
- Add the ability for libraries to upload a placholder image of their choosing (DIS-1129) (*AB*)
- Added the option of adding extra credit activities to campaigns. These activities have goals and rewards but do not count towards the campaign completion. (DIS-655) (*AB*)

// chloe

// jacob

// nick

// lucas

// jboyer


## This release includes code contributions from
### ByWater Solutions
- Leo Stoyanov (LS)
- Yanjun Li (YL)
- Imani Thomas (IT)
- Ian Walls (IW)
- Laura Escamilla (LE)
- Nick Clemens (NC)

### Equinox Open Library Initiative
- Jason Boyer (JB)

### Grove For Libraries
- Mark Noble (MDN)
- Kirstien Kroeger (KK)
- Katherine Perdue (KP)
- Kodi Lein (KL)
- Myranda Fuentes (MAF)

### LibraryThing
- Chris Catalfo (CC)
- Lauren Przywara (LP)

### Nashville Public Library
- James Staub (JStaub)

### Open Fifth
- Alexander Blanchard (AB)
- Chloe Zermatten (CZ)
- Jacob O'Mara (JOM)

### Theke Solutions
- Lucas Montoya (LM)

## Special Testing thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)
- Mark Noble (Grove)
- Kirstien Kroeger (KK)

## Special Documentation thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)

## This release includes sponsored developments from
- 
