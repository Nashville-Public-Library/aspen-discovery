## Aspen Discovery Updates

// jboyer
### Theme Updates
- Header / menu links will accurately reflect whether they open in a new tab or not. (DIS-937) (*JB*)

// mark
### API Updates
- Return volumeId and volumeName as part of actions to place a hold on a single volume. (DIS-988) (*MDN*)
- Only return holdable volumes as part of ItemAPI getVolumes. (DIS-988) (*MDN*)

### Search Updates
- Display all format values within the Format Facet Popup, not just the top 30 values. (DIS-959) (*MDN*)
- Properly alphabetize values within the Facet Popup to ignore the case of the value. (DIS-960) (*MDN*)

### Other Updates
- Correct quotes within Enable Talpa as a search mode tooltip in Library settings. (DIS-321) (*MDN*)

// katherine
### Series Updates
- For titles that belong to multiple series, display the series sorted by where the series statement came from, prioritizing the 800 field over 830 as well as series titles that occur multiple times in a grouped work. (DIS-990) (*KP*) 
- During indexing, include uncontrolled (not traced) series (490a with a first indicator of 0).  Remove series2 field from reindexer and Solr since it is no longer in use. (DIS-715) (*KP*)

// myranda
### Other Updates
- Update Twitter icon and public-facing name to X. (DIS-271) (*MAF*)
- Aspen will now load Font Awesome icons from separate `fontawesome.min.css`, `brands.min.css`, and `solid.min.css` files instead of `all.min.css` so Font Awesome 6 Brands can be used while retaining Font Awesome 5 Free (solid) use everywhere else. (DIS-271) (*MAF*)

// kirstien


// kodi
### Web Builder Updates
- Added an option for home library web content administration including sharing options and the owning library for images and PDFs (DIS-657) (*KL*)
    - Users with reduced permissions will only be able to see and edit web content owned by their library or shared with their library.
    - Users with reduced permissions will not be able to edit web content information for web content that is shared with them, but only editable by other libraries.
    - Users with reduced permissions cannot add images or PDFs that are valid for All Libraries or share them with all libraries.

<div markdown="1" class="settings">

#### New Permissions
- Administer Web Content for Home Library - Allows the user to manage images and PDFs for their home library only.

#### New Settings
- Images > Owning Library
- Images > Share With
- Images > Library to Share With
- PDFs > Owning Library
- PDFs > Share With
- PDFs > Library to Share With

</div>

// kyle

// ian

// imani
## CarlX Updates
- skipping bypass reading history check in carlx Driver if soap request does not return a Patron (DIS-915) (*IT*)

### Materials Request Updates
- Added an all option to the materials request page. (DIS-919) (*IT*)

// leo
### e-Commerce Updates
- Resolved an issue where the NCR payments GET callback intermittently returned incomplete data due to incorrect settings being loaded from a misnamed property. (DIS-958) (*LS*)

### Polaris Updates
- Deposited amounts are no longer shown on the Fines page, preventing users from attempting to pay them and encountering Polaris errors due to invalid payment attempts. (DIS-958) (*LS*)

### Account Updates
- Ensured that the “Confirm Password” field must match the original password field's input during self registration. (DIS-922) (*LS*)

### Assabet Events Updates
- Limit the "Number of Days to Index" to 30 days, as Assabet only provides events data up to 30 days via their API. (DIS-994) (*LS*)
  - They plan to implement the ability to fetch events data beyond 30 days via their API in a future development.

### Administration Updates
- Improved how password fields behave by enforcing minimum and maximum lengths, and digits-only input when required. (DIS-922) (*LS*)
- For the confirm-password field, adjusted layout to prevent visual issues when password errors appear, ensuring labels stay in place. (DIS-922) (*LS*)

### eCommerce Updates
- Fixed an issue where an AJAX error would display during PayPal Payflow payments when token authentication would fail. (DIS-945) (*LS*)

### Koha Updates
- Resolved an issue where users could select, but could not delete, more than one material requests at once. (DIS-940) (*LS*)
- The "Delete Selected" button for material requests is now disabled until at least one item is selected. (DIS-940) (*LS*)
- Implemented a green success alert for successful deletions and a red error alert for failures, to clearly indicate the status of material request operations. (DIS-940) (*LS*)
- Added backend validation during self registration to make sure password rules are enforced even if frontend validation is bypassed. (DIS-922) (*LS*)
- Pass down the more informative error message when `loginToKohaOpac()` is invoked and the patron account has a null `ils_password`. (DIS-967) (*LS*)

### Materials Request Updates
- Resolved an issue where, if more than one entry in the Materials Request Formats list shared the same Format value, none of the entries could be deleted if any one of them was being used by an existing material request. (DIS-942) (*LS*) 
- Fixed missing `Logger::LOG_ERROR` argument in `$logger->log()` within `makeThumbnail()`, which previously caused an Aspen error on the interface. (DIS-496) (*LS*)
- CSV exports from the Manage Materials Requests page now respect all active filters to exactly match on-screen results. (DIS-193) (*LS*)
- Settings under the Materials Request section of Library Systems now dynamically show or hide configuration fields based on the selected Materials Request System. This is to reduce confusion and to streamline the admin interface by only displaying relevant options. (DIS-902) (*LS*)
- Renamed labels and removed unnecessary notes for certain email-related settings under the Materials Request section of Library Systems to improve user clarity. (DIS-902) (*LS*)

### Reading History Updates
- Added visual highlighting to the active page number on the "My Reading History" page. (DIS-986) (*LS*)

### Two-Factor Authentication Updates
- Removed the “Libraries” and “Patron Types” labels and “Select All” options because users cannot scope Local Administrators to Libraries and Patron Types. (DIS-968) (*LS*)
- Removed the option of selecting the “admin_sso” Account Profile, as the authentication flow is handled entirely by the identity provider. (DIS-968) (*LS*)

### Other Updates
- Disable autofill for the ShareIt password field under Library Systems to prevent user confusion and submission errors. (DIS-55) (*LS*)
- Users with the "Administer Library Browse Categories" permission can now view and manage Browse Category Groups scoped to specific locations within their home library. (DIS-954) (*LS*)
- Removed PHP warning messages from the site header when a login attempt fails. (DIS-974) (*LS*)
- Increased the maximum password length in Aspen login forms from 60 to 70 characters, in this case to better accommodate Sierra ILS passwords. (DIS-975) (*LS*)
- Fixed an issue where bulk-deleting Two-Factor Authentication Settings did not work. (DIS-969) (*LS*)
- Moved the "Library Hours" under the "ILS/Account Integration" section of the Locations settings to align with user expectations. (DIS-987) (*LS*)
- Fixed incorrect display of HTML entities on the Advanced Search page for facet values and on the Grouped Work Display Settings page for a setting. (DIS-992) (*LS*)
- Implemented a check to confirm file existence in the file system before rendering the uploaded file. (DIS-1004) (*LS*)

// yanjun
### Other Updates
- Update ils_password as well while resetting PIN. (DIS-935) (*YL*)

// laura

// james
### Other Updates
- Remove nashville.aspenlocal and nashville.production site directories from the repository

// alexander
- Added a check for the 'Allow searching locally created web content' setting when indexing web builder pages to prevent them from showing in 'in Library Website' search when this setting is not checked by a given library. (DIS-899) (*AB*)
### Community Engagement Updates
- Removed the 'Is Like' option from the UI when the user is setting milestone criteria based on list Id. (DIS-826) (*AB*)
- Allow users to enter multiple list Ids seperated with a | to the conditional value field when their conditional field is list Id. (DIS-826) (*AB*)
### Other
- Updated the charset and encoding in SMTP settings to allow special characters in email subject lines to display correctly. (DIS-824) (*AB*)

// chloe

## eCommerce Updates
- Move the Administer HeyCentric Settings permission into the existing eCommerce section and rename it to Administer HeyCentric. (DIS-927) (*CZ*)
- Add a "potential security and cost implications" warning to the Administer HeyCentric permission description. (DIS-927) (*CZ*)
## Other Updates
- Add "sys/Account/" to the filepaths handled by the aspen autoloader to prevent Patron Type updates errors. (DIS-996) (*CZ*)

### Other
- Prevent AJAX error by logging SMTP connection errors instead of echoing them. (DIS-983) (*CZ*)

### Koha Driver Updates
- Fixed a bug where setting an extended patron attribute as mandatory would prevent patrons from using the self registration form. (DIS-998) (*CZ*)

### Usage Graphs updates:
- Refactored the code for increased maintainability for: (DIS-100) (*CZ*)
    - Aspen Usage
    - ILS Usage
    - Summon Usage
    - Axis360 Usage
    - Sideload Usage
    - API Usage
    - Material Requests Usage
- Enhance graph titles and CSV file names specificity with the inclusion of section titles where relevant (DIS-100) (*CZ*)

// jacob
### SSO Updates
- Allow the ability to toggle off ILS user creation when logging in using SSO (*JOM*)

### Template updates
- Amend cookie consent template for fix typo (*JOM*)

### Other Updates
- Added ARM builds for docker images to github-actions (DIS-913) (*JOM*)
- Add toggle to disable UserAgent tracking (DIS-887) (*JOM*)

// nick

// lucas
### Other Updates
- Fix an issue where the "Primary Contact Method" field in the self-registration form doesn't show when it is mark as required in the ILS (Koha) (DIS-928) (*LM*)

### Koha Updates
- Now the documentation on how to use the methods included in the KohaApiUserAgent class is clearer. (DIS-951) (*LM*)
- Fixed an issue where the access token, to communicate with the Koha API, was renewed on every request. (DIS-936) (*LM*)


## This release includes code contributions from
### ByWater Solutions
- Leo Stoyanov (LS)
- Yanjun Li (YL)
- Imani Thomas (IT)
- Ian Walls (IW)
- Laura Escamilla (LE)
- Nick Clemens (NC)

### Equinox Open Library Intiative
- Jason Boyer (JB)

### Grove For Libraries
- Mark Noble (MDN)
- Kirstien Kroeger (KK)
- Katherine Perdue (KP)
- Kodi Lein (KL)
- Myranda Fuentes (MAF)

### Nashville Public Library
- James Staub (JStaub)

### Open Fifth
- Alexander Blanchard (AB)
- Chloe Zermatten (CZ)
- Jacob O'Mara (JOM)

### Theke Solutions
- Lucas Montoya (LM)

## Special Testing thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)
- Mark Noble (Grove)

## Special Documentation thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)

## This release includes sponsored developments from
- CLEVNET Library Cooperation
- Gail Borden Public Library
- Metropolitan Library System
- SWAN Library Network
